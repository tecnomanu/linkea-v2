---
description: Data models and structures for Linkea - Landing, Link, User
globs:
alwaysApply: true
---

# Data Models & Structures

## Block Types (Link Types)

Types defined in `types.ts` and correspond to legacy `blockTypes.constants.ts`:

| Type       | Description       | Legacy equivalent |
| ---------- | ----------------- | ----------------- |
| `link`     | Standard link     | `button`          |
| `header`   | Section header    | `heading`         |
| `social`   | Social media icon | `social`          |
| `youtube`  | YouTube embed     | `youtube`         |
| `spotify`  | Spotify embed     | `spotify`         |
| `whatsapp` | WhatsApp link     | `whatsapp`        |
| `mastodon` | Mastodon profile  | `mastodon`        |

## Landing Structure

### Frontend (types.ts)

```typescript
interface UserProfile {
    name: string;
    handle: string; // slug
    avatar: string; // logo.image
    bio: string; // options.bio
    theme: string; // template_config.background.bgName
    customDesign: {
        backgroundColor: string;
        buttonStyle: "solid" | "outline" | "soft" | "hard";
        buttonShape: "sharp" | "rounded" | "pill";
        buttonColor: string;
        buttonTextColor: string;
        fontPair: "modern" | "elegant" | "mono";
        roundedAvatar?: boolean;
    };
}
```

### Backend (Landing model)

-   `name`, `slug`, `domain_name`
-   `logo`: `{ image, thumb }`
-   `template_config`: `{ background, buttons, textColor, icons, socials }`
-   `options`: `{ title, bio, description, ... }`

## Link Structure

### Frontend (types.ts)

```typescript
interface LinkBlock {
    id: string;
    title: string; // text in backend
    url: string; // link in backend
    isEnabled: boolean; // state in backend
    type: BlockType;
    clicks: number; // visited in backend
    icon?: { type?: string; name?: string };
    sparklineData: { value: number }[];

    // Type-specific fields
    phoneNumber?: string; // WhatsApp
    predefinedMessage?: string; // WhatsApp
    headerSize?: "small" | "medium" | "large"; // Header
    showInlinePlayer?: boolean; // YouTube/Spotify
    autoPlay?: boolean;
    startMuted?: boolean;
    playerSize?: "normal" | "compact";
}
```

### Backend (Link model)

-   `text`, `link`, `state`, `type`, `order`, `group`
-   `icon`: `{ type, name }`
-   `options`: `{ ... type-specific options }`
-   `visited`: number (click count)

## Data Flow (New System)

1. **Inertia Page Load**: `PanelController` -> `Inertia::render()` -> React Page
2. **Auto-save**: React state -> `useAutoSave` -> `/api/panel/*` endpoints
3. **Service Layer**: `PanelDataService` handles all panel data operations

## Field Mapping Frontend <-> Backend

| Frontend Field | Backend Field | Notes                   |
| -------------- | ------------- | ----------------------- |
| `title`        | `text`        | Link display text       |
| `url`          | `link`        | Target URL              |
| `isEnabled`    | `state`       | Boolean active/inactive |
| `clicks`       | `visited`     | Click counter           |
| `handle`       | `slug`        | Landing URL path        |
| `avatar`       | `logo.image`  | Profile image           |
| `bio`          | `options.bio` | User description        |
